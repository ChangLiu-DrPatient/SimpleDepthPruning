# ---- k-medioids clustering 
CUDA_VISIBLE_DEVICES=0 nohup python -u main.py \
--model meta-llama/llama-2-7b-hf \
--eval_zero_shot \
--prune_method select \
--target_module_name input_layernorm \
--num_components 14 \
--merge_ranges 1-30 > logs/llama_2_7b/select_layernorm/14.txt &

--save_model /home/scratch/changl8/prune_llm/llama_2_7b/k_medioids_layernorm/10 

CUDA_VISIBLE_DEVICES=2 nohup python -u main.py \
--model meta-llama/llama-2-7b-hf \
--prune_method select \
--target_module_name self_attn.k_proj \
--num_components 12 \
--merge_ranges 1-30 \
--save_model /home/scratch/changl8/prune_llm/llama_2_7b/k_medioids_self_attn.k_proj/12 > logs/llama_2_7b/select_self_attn.k_proj/12.txt &


# ----  Shortened_Llama_baseline
CUDA_VISIBLE_DEVICES=1 nohup python -u main.py \
--model meta-llama/llama-2-7b-hf \
--eval_zero_shot \
--prune_method shortened_llm \
--nsamples 8 \
--num_components 3 > logs/llama_2_7b/shortened_llama/3.txt &


# ---- shortgpt basline 
CUDA_VISIBLE_DEVICES=2 nohup python -u main.py \
--model meta-llama/llama-2-7b-hf \
--eval_zero_shot \
--prune_method shortgpt \
--nsamples 8 \
--num_components 3 > logs/llama_2_7b/shortgpt/3.txt &

# --- laco baseline  
CUDA_VISIBLE_DEVICES=3 nohup python -u main.py \
--model meta-llama/llama-2-7b-hf \
--eval_zero_shot \
--prune_method laco \
--nsamples 8 \
--num_components 15 > logs/llama_2_7b/laco/15.txt &


# ---- merging with seed inputs
CUDA_VISIBLE_DEVICES=3 nohup python -u main.py \
--model meta-llama/llama-2-7b-hf \
--eval_zero_shot \
--prune_method merge \
--merge_thresh 0.5 \
--target_module_name input_layernorm \
--nsamples 8 \
--target_var 75 > logs/llama_2_7b/merge_act/th0.5_v75.txt &

CUDA_VISIBLE_DEVICES=2 nohup python -u main.py \
--model meta-llama/llama-2-7b-hf \
--eval_zero_shot \
--prune_method merge \
--merge_thresh 0.5 \
--target_module_name input_layernorm \
--nsamples 8 \
--target_var 40 > logs/llama_2_7b/merge_act/th0.5_v40.txt &

# ---- test sparsity for layermerge
CUDA_VISIBLE_DEVICES=2 nohup python -u main.py \
--model meta-llama/llama-2-7b-hf \
--prune_method merge \
--merge_thresh 0.5 \
--target_module_name input_layernorm \
--nsamples 8 \
--target_var 40 > logs/llama_2_7b/merge_act/th0.5_v40.txt &

CUDA_VISIBLE_DEVICES=3 nohup python -u main.py \
--model meta-llama/llama-2-7b-hf \
--prune_method merge \
--merge_thresh 0.05 \
--target_module_name input_layernorm \
--nsamples 8 \
--target_var 75 > logs/llama_2_7b/merge_act/th0.05_v75.txt &


# ---- PCA mering on weight space 
CUDA_VISIBLE_DEVICES=0 nohup python -u main.py \
--model meta-llama/llama-2-7b-hf \
--eval_zero_shot \
--prune_method merge \
--num_components 14 \
--merge_ranges 1-30 > logs/llama_2_7b/merge_weights/14.txt &

# ---baseline
CUDA_VISIBLE_DEVICES=3 nohup python -u main.py \
--model meta-llama/llama-2-7b-hf \
--eval_zero_shot \
--prune_method none > logs/llama_2_7b/none.txt &